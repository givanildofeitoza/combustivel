unit UBombaRepositorio;

interface

uses
  bomba, System.Generics.Collections, Data.SqlExpr;

type TBombaRepositorio = class
  private
    FSQLQuery : TSQLQuery;
  public
    procedure Adicionar(pBomba : TBomba);
    procedure Remover(pId : integer);
    function ObterPorId(pId : integer) : TBomba;
    function ObterTodas() : TObjectList<TBomba>;

    constructor Create(pSQLQuery : TSQLQuery);
end;

implementation

uses
  System.SysUtils;

{ TBombaRepositorio }

constructor TBombaRepositorio.Create(pSQLQuery: TSQLQuery);
begin
  FSQLQuery := pSQLQuery;
end;

procedure TBombaRepositorio.Adicionar(pBomba: TBomba);
begin
    FSQLQuery.SQL.Clear;
    FSQLQuery.SQL.Add('INSERT INTO BOMBA(NOMEBOMBA,IDTANQUE) VALUE (');
    FSQLQuery.SQL.Add(quotedstr(pBomba.NomeBomba)+',');
    FSQLQuery.SQL.Add(quotedstr(pBomba.IdTanque.ToString())+')');
    FSQLQuery.ExecSQL();
end;

function TBombaRepositorio.ObterPorId(pId: integer): TBomba;
begin

end;

function TBombaRepositorio.ObterTodas: TObjectList<TBomba>;
begin

end;

procedure TBombaRepositorio.Remover(pId: integer);
begin
    FSQLQuery.SQL.Clear;
    FSQLQuery.SQL.Add('DELETE FROM BOMBA WHERE ID='+quotedstr(pId));
    FSQLQuery.ExecSQL();
end;

end.
